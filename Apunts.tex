%\RequirePackage[l2tabu, orthodox]{nag}
\documentclass[10pt, a4paper, openright, final]{memoir}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[catalan]{babel}
\usepackage{csquotes}
\usepackage{subfiles}
\usepackage{mathtools,amssymb,amsthm}
\usepackage{microtype}
\usepackage[mathcal]{euscript}	% hmm
%\usepackage[framemethod=TikZ]{mdframed}
\usepackage{tkz-euclide}
\usetkzobj{all}
\usetikzlibrary{decorations.text}
\usepackage{anyfontsize}
\usepackage[scaled=0.92]{helvet}
\usepackage{graphicx}
\usepackage[sorting=none, backend=biber, refsection=part]{biblatex}
\usepackage[hidelinks]{hyperref}

\addbibresource{referencies.bib}
\DeclareQuoteAlias{spanish}{catalan}
\renewcommand{\bookname}{Llibre}

\setsecnumdepth{subsection}
\settocdepth{subsection}

\renewcommand\booknumberlinebox[2]{#2\hspace{1em}}
\renewcommand\partnumberlinebox[2]{#2\hspace{1em}}
\renewcommand\chapternumberlinebox[2]{#2\hspace{1em}}
%\renewcommand\sectionnumberlinebox[2]{#2\hspace{1em}}

%\setlength\cftpartnumwidth{0em}
%\setlength\cftchapternumwidth{2em}
%\setlength\cftsectionindent{2em}

%\renewcommand*{\cftdotsep}{1} %separació punts horitzontals a l'índex
\setpnumwidth{3em}
\setrmarg{4em}

\pagestyle{ruled}
\setlength{\headheight}{12.1638pt}

%\newenvironment{history}[1][]{%
%	\mdfsetup{%
%		frametitle={%
%			\tikz[baseline=(current bounding box.east),outer sep=0pt]
%			\node[anchor=east,rectangle,fill=blue!20]
%			{\strut Coneix els teus herois:~#1};}%
%	}%
%% Both conditions
%\mdfsetup{%
%	innertopmargin=10pt,linecolor=blue!20,%
%	linewidth=2pt,topline=true,%
%	frametitleaboveskip=\dimexpr-\ht\strutbox\relax%
%}
%	% Code for box design goes here.
%	
%	\begin{mdframed}[]\relax}{%
%	\end{mdframed}}

\hypersetup{%
	colorlinks=true,
	linkcolor=[rgb]{0,0,0.5},
	urlcolor=red,
	pdftitle={Apunts del grau de matemàtiques UAB},
	pdfauthor={Claudi Lleyda Moltó},
}

\title{%
	\href{https://claudilleyda.github.io}{Apunts de matemàtiques}}
\author{Claudi Lleyda Moltó}
\date{Les matemàtiques són un joc de definicions.}

\theoremstyle{plain}
\newtheorem{theorem}{Teorema}[section]
\newtheorem{proposition}[theorem]{Proposició}
\newtheorem{lemma}[theorem]{Lema}
\newtheorem{corollary}[theorem]{\Corollari}
\newtheorem{note}[theorem]{Nota} %Amb la meva veu?
\newtheorem{observation}[theorem]{Observació} %Per reinterpretacions?
\newtheorem{example}[theorem]{Exemple}
\newtheorem{tautology}[theorem]{Tautologia}
\newtheorem{axiom}[theorem]{Axioma}

\theoremstyle{definition}
\newtheorem{definition}[theorem]{Definició}
\newtheorem{notation}[theorem]{Notació}

\graphicspath{{imatges/}{../imatges/}}

\newenvironment{solution}{%
		\renewcommand\qedsymbol{\ensuremath{\lozenge}}%
		\begin{proof}[Solució]%
	}{%
		\end{proof}%
	}

\DeclareMathOperator{\Long}{L}
\DeclareMathOperator{\Dist}{d}
\DeclareMathOperator{\B}{B}
\DeclareMathOperator{\bola}{B}
\DeclareMathOperator{\R}{R}
\DeclareMathOperator{\omicron}{o}
\DeclareMathOperator{\Omicron}{O}
\DeclareMathOperator{\rang}{rang}
\DeclareMathOperator{\Ssup}{S}
\DeclareMathOperator{\sinf}{s}
\DeclareMathOperator{\Fr}{Fr}
\DeclareMathOperator{\St}{St}
\DeclareMathOperator{\mcd}{mcd}
\DeclareMathOperator{\mcm}{mcm}
\DeclareMathOperator{\ch}{ch}
\DeclareMathOperator{\cont}{cont}
\DeclareMathOperator{\grau}{grau}
\DeclareMathOperator{\Id}{Id}
\DeclareMathOperator{\GrupSimetric}{S}
\DeclareMathOperator{\Mou}{M}
\DeclareMathOperator{\ordre}{\omicron}
\DeclareMathOperator{\ncicles}{c}
\DeclareMathOperator{\sig}{sig}
\DeclareMathOperator{\interior}{Int}
\DeclareMathOperator{\clausura}{Cl}
\DeclareMathOperator{\distancia}{d}
\DeclareMathOperator{\esfera}{S}
\DeclareMathOperator{\sfourier}{S}
\let\ker\relax
	\DeclareMathOperator{\ker}{ker}
\DeclareMathOperator{\Ima}{Im}
\DeclareMathOperator{\Antiima}{\Ima^{-1}}
\DeclareMathOperator{\cosdefraccions}{Q}
\DeclareMathOperator{\funciolongituddarc}{S}
\DeclareMathOperator{\curvatura}{\kappa}
\DeclareMathOperator{\tangent}{T}
\DeclareMathOperator{\normal}{N}

\DeclareMathOperator*{\suport}{Supp}

\let\originalnsim=\nsim
\def\nsim{\mathbin{\originalnsim}}

\newcommand{\divides}{\mathrel{|}}
\newcommand{\ndivides}{\mathrel{\nmid}}
\newcommand{\abs}[1]{\left\lvert#1\right\rvert}
\newcommand{\norm}[1]{\left\lVert#1\right\rVert}
\newcommand{\lxor}{\veebar}
\newcommand{\convergeixuniformement}{\rightrightarrows}
\newcommand{\convolucio}{\ast}
\newcommand{\conjugat}[1]{\overline{#1}}
\newcommand{\uniodisjunta}{\sqcup}
\newcommand{\componentconnex}{\mathrm{C}}
\newcommand{\biguniodisjunts}{\bigsqcup}
\newcommand{\prodvec}{\mathbin{\wedge}}

\newcommand{\sii}{\iff}
\newcommand{\implica}{\implies}
\newcommand{\implicatper}{\impliedby}

\newcommand{\obert}[1]{\mathcal{#1}}
\newcommand{\tancat}[1]{\obert{#1}}
\newcommand{\base}[1]{\mathcal{#1}}
\newcommand{\diff}{\mathrm{d}}
\newcommand{\e}{\mathrm{e}}
\newcommand{\iu}{\mathrm{i}}
\newcommand{\uppi}{\pi} % REVISIT
\newcommand{\prodesc}[2]{
	\left\langle#1,#2\right\rangle}

%\setcounter{chapter}{-1}

\setcounter{MaxMatrixCols}{20}

\newcommand{\corollari}{coro{\lgem}ari }
\newcommand{\Corollari}{Coro{\lgem}ari }

\makeatletter
\newcommand*{\rom}[1]{\expandafter\@slowromancap\romannumeral #1@}
\makeatother

\newcommand{\anglelogos}{337.5}
\newcommand*{\titleTMB}{\begingroup% Three Men in a Boat
	\vspace*{0.1\textheight}
	\centering
	\settowidth{\unitlength}{\itshape Les matemàtiques són un joc de definicions}
	\vspace*{\baselineskip}
	{\large\scshape Claudi Lleyda Moltó}\\[\baselineskip]
	\rule{\unitlength}{1.6pt}\vspace*{-\baselineskip}\vspace*{2pt}
	\rule{\unitlength}{0.4pt}\\[\baselineskip]
	{\huge\href{https://claudilleyda.github.io}{Apunts de matemàtiques}}\\[\baselineskip] %{Apunts del grau}?
	{\itshape Les matemàtiques són un joc de definicions}\\[0.2\baselineskip]
	\rule{\unitlength}{0.4pt}\vspace*{-\baselineskip}\vspace{3.2pt}
	\rule{\unitlength}{1.6pt}%\\[\baselineskip]
	\vfill
	{\centering\begin{tikzpicture}
		\tkzDefPoint(0,0){O}
		\tkzDefPoint(3,0){A}
		\tkzDefPoint(3.1,0){Alluny}
		\tkzDefPoint(-3,0){A2}
		\tkzDefPoint(0,3){D}
		\tkzDefPoint(0,-3){D2}
		
		\tkzDefMidPoint(O,D)   \tkzGetPoint{E}
		\tkzDefMidPoint(O,E)   \tkzGetPoint{F}
		
		\tkzDrawBisector[color=white](A,F,O)   \tkzGetPoint{M1}
		\tkzDrawBisector[color=white](M1,F,O)   \tkzGetPoint{G}
		
		\tkzDefLine[orthogonal=through F](G,F) \tkzGetPoint{c}
		\tkzInterLL(F,c)(O,A) \tkzGetPoint{I}
		
		\tkzDrawBisector[color=white](I,F,G)   \tkzGetPoint{H}
		\tkzDefMidPoint(H,A)   \tkzGetPoint{M}
		\tkzInterLC(O,D)(M,H) \tkzGetPoints{K}{J}
		
		\tkzInterLC(O,A)(O,G) \tkzGetPoints{G'}{G}
		
		\tkzInterLC(O,A)(G',J) \tkzGetPoints{L}{N}
		\tkzDefLine[orthogonal=through L](O,A) \tkzGetPoint{P3}
		\tkzInterLC(P3,L)(O,A) \tkzGetPoints{P_{14}}{P_{3}}
		
		\tkzInterCC(P_{3},A2)(O,A) \tkzGetPoints{P_{6}}{P}
		\tkzInterCC(P_{6},P_{3})(O,A) \tkzGetPoints{P_{9}}{P}
		\tkzInterCC(P_{9},P_{6})(O,A) \tkzGetPoints{P_{12}}{P}
		\tkzInterCC(P_{12},P_{9})(O,A) \tkzGetPoints{P_{15}}{P}
		\tkzInterCC(P_{15},P_{12})(O,A) \tkzGetPoints{P_{1}}{P}
		\tkzInterCC(P_{1},P_{15})(O,A) \tkzGetPoints{P_{4}}{P}
		\tkzInterCC(P_{4},P_{1})(O,A) \tkzGetPoints{P_{7}}{P}
		\tkzInterCC(P_{7},P_{4})(O,A) \tkzGetPoints{P_{10}}{P}
		\tkzInterCC(P_{10},P_{7})(O,A) \tkzGetPoints{P_{13}}{P}
		\tkzInterCC(P_{13},P_{10})(O,A) \tkzGetPoints{P_{16}}{P}
		\tkzInterCC(P_{16},P_{13})(O,A) \tkzGetPoints{P_{2}}{P}
			
		\tkzInterCC(P_{2},P_{16})(O,A) \tkzGetPoints{P_{5}}{P}
		\tkzInterCC(P_{5},P_{2})(O,A) \tkzGetPoints{P_{8}}{P}
		\tkzInterCC(P_{8},P_{5})(O,A) \tkzGetPoints{P_{11}}{P}
		\tkzInterCC(P_{11},P_{8})(O,A) \tkzGetPoints{P_{14}}{P}
		\tkzInterCC(P_{14},P_{11})(O,A) \tkzGetPoints{P_{0}}{P}
		
		\tkzInterLC(F,I)(O,A) \tkzGetPoints{P1}{P2}
		\tkzInterLC(F,H)(O,A) \tkzGetPoints{P4}{P5}
		\tkzInterLC(F,G)(O,A) \tkzGetPoints{P6}{P7}
		\tkzInterLC(F,M1)(O,A) \tkzGetPoints{P8}{P9}
		
		\tkzFillCircle[color = black](O,Alluny)
		\tkzFillCircle[color = white](O,A)
				
		\tkzDrawPoints[shape=cross,color=black](E,M)
		
		\tkzDrawSegment(P9,F)
		\tkzDrawSegment(P7,F)
		\tkzDrawSegment(P4,F)
		\tkzDrawSegment(P1,F)
		
		\tkzDrawSegment(F,A)
		\tkzDrawSegment(A2,A)
		\tkzDrawSegment(D2,D)
		
		\tkzDrawSegment(P_{3},P_{14})
		\tkzDrawSegment(P_{14},P_{3})
		\tkzDrawSegment(P_{3},A2)
		
		\tkzDrawCircle(M,H)
		\tkzDrawCircle(G',J)
		
		\tkzDrawSegment[dashed](P_{3},P_{0})
		\tkzDrawSegment[dashed](P_{6},P_{3})
		\tkzDrawSegment[dashed](P_{9},P_{6})
		\tkzDrawSegment[dashed](P_{12},P_{9})
		\tkzDrawSegment[dashed](P_{15},P_{12})
		\tkzDrawSegment[dashed](P_{1},P_{15})
		\tkzDrawSegment[dashed](P_{4},P_{1})
		\tkzDrawSegment[dashed](P_{7},P_{4})
		\tkzDrawSegment[dashed](P_{10},P_{7})
		\tkzDrawSegment[dashed](P_{13},P_{10})
		\tkzDrawSegment[dashed](P_{16},P_{13})
		\tkzDrawSegment[dashed](P_{2},P_{16})
		\tkzDrawSegment[dashed](P_{5},P_{2})
		\tkzDrawSegment[dashed](P_{8},P_{5})
		\tkzDrawSegment[dashed](P_{11},P_{8})
		\tkzDrawSegment[dashed](P_{14},P_{11})
		\tkzDrawSegment[dashed](P_{0},P_{14})
		
		\fontsize{23.5}{23.5}\selectfont
		\path [postaction={decorate,decoration={text along path, 
		reverse path,text align=center,
		text={|\sffamily\color{black}|Universitat Aut{ò}noma de Barcelona}}}] (-30:3.1cm+0.3em) arc (-30:210:3.1cm+0.3em);
		\node[black,rotate=180-\anglelogos-90] at (180-\anglelogos:3.1cm+0.6em)
		{\includegraphics[width=1em]{UABLogo.pdf}};
		\node[black,rotate=\anglelogos-90] at (\anglelogos:3.1cm+0.6em)%
		{\includegraphics[width=1em]{UABLogo.pdf}};
		\path [postaction={decorate,decoration={text along path, text align=center,
		text={|\color{black}|Grau en Matem{à}tiques }}}] (210:3.1cm+2ex) arc (210:330:3.1cm+2ex);
	\end{tikzpicture}}
	\vfill
	{\large\scshape Notes de classe}\\[\baselineskip]
	{\small\scshape Promoció 2016-17}\par
	\vspace*{0.1\textheight}
	\endgroup}

\newcommand{\portada}{
	{\hypersetup{urlcolor=black,linkcolor=black}
		\begin{titlingpage*}
			\calccentering{\unitlength}
			\begin{adjustwidth*}{\unitlength}{-\unitlength}
				\titleTMB
			\end{adjustwidth*}
		\end{titlingpage*}}
}

\newcommand{\gracies}{
	\thispagestyle{empty}
	\chapter*{Agraïments}
	M'agradaria donar les gràcies a l'Arnau José, el meu fillol, pels seus apunts d'anàlisi matemàtica; i a l'Àlex Miranda pels seus apunts de geometria diferencial i equacions diferencials ordinàries \rom{2}, a més d'haver-me avisat d'un munt d'errors per tot arreu.
	
	Sobretot agrair a l'Aure Losquiño per seguir de ben a prop el progrés i l'evolució de l'escrit amb una visió molt	 crítica des del començament, trobant-me també mil errors i discutint maneres d'afrontar els múltiples problemes que he trobat escrivint tot això.
	\clearpage
}

%\makepagestyle{index}
%	\makeevenhead{index}{}{}{}
%	\makeoddhead{index}{}{}{}
%	\makeevenfoot{index}{\thepage}{}{}
%	\makeoddfoot{index}{}{}{\thepage}
%%\AtBeginDocument{\addtocontents{toc}{\protect\thispagestyle{index}}} 
%\newcommand{\tauladecontinguts}{
%	{\pagestyle{index}
%	\hypersetup{urlcolor=black,linkcolor=black}
%	\tableofcontents
%	\clearpage}
%}

\newcommand{\tauladecontinguts}{
	{\hypersetup{urlcolor=black,linkcolor=black}
	\tableofcontents}
}

%\makeatletter
%\def\thickhrulefill{\leavevmode \leaders \hrule height 1.2ex \hfill \kern \z@}
%\def\@makechapterhead#1{
%%	\vspace*{10\p@}%
%	{\parindent \z@ \centering \reset@font
%		\thickhrulefill\quad
%		\scshape\bfseries\text{\@chapapp{} \hfill \thechapter}
%		\quad\thickhrulefill
%		\par\nobreak
%		\vspace*{10\p@}%
%		\interlinepenalty\@M
%		\hrule
%		\vspace*{10\p@}%
%		\Huge \bfseries #1 \par\nobreak
%		\par
%		\vspace*{10\p@}%
%		\hrule
%		\vspace*{15\p@}%
%	}}
%\makeatother

\makeatletter
	\let\oldr@@t\r@@t
	\def\r@@t#1#2{%
	\setbox0=\hbox{$\oldr@@t#1{#2\,}$}\dimen0=\ht0
	\advance\dimen0-0.2\ht0
	\setbox2=\hbox{\vrule height\ht0 depth -\dimen0}%
	{\box0\lower0.4pt\box2}}
	\LetLtxMacro{\oldsqrt}{\sqrt}
	\renewcommand*{\sqrt}[2][\ ]{\oldsqrt[#1]{#2}}
\makeatother

\let\originalpart=\part
\def\part{\cleartoevenpage[\thispagestyle{empty}]\originalpart}

\let\originalbook=\book
\def\book{\cleartoevenpage[\thispagestyle{empty}]\originalbook}
\renewcommand*{\afterbookskip}{\vfill}

\makeatletter
\newlength{\numberheight}
\newlength{\barlength}
\makechapterstyle{cveelo}{%
  \setlength{\afterchapskip}{40pt}
  \renewcommand*{\chapterheadstart}{\vspace*{40pt}}
  \renewcommand*{\afterchapternum}{\par\nobreak\vskip 25pt}
  \renewcommand*{\chapnamefont}{\LARGE\flushright}
  \renewcommand*{\chapnumfont}{\HUGE}
  \renewcommand*{\chaptitlefont}{\bfseries\Huge\flushright}
  \renewcommand*{\printchaptername}{%
    \chapnamefont\scshape{\@chapapp}}
  \renewcommand*{\chapternamenum}{}
  \setlength{\beforechapskip}{4em}
  \setlength{\midchapskip}{\paperwidth}
  \addtolength{\midchapskip}{-\textwidth}
  \addtolength{\midchapskip}{-\spinemargin}
  \renewcommand*{\printchapternum}{%
    \makebox[0pt][l]{\hspace{.8em}%
      \resizebox{!}{\beforechapskip}{\chapnumfont \thechapter}%
      \hspace{.8em}%
      \rule{\midchapskip}{\beforechapskip}%
    }}%
}
\makeatother

\chapterstyle{cveelo}
%\hangsecnum

\let\originalbibliography=\printbibliography
\def\printbibliography{\openany\originalbibliography\openright}

\let\originalleft\left
\let\originalright\right
\renewcommand{\left}{\mathopen{}\mathclose\bgroup\originalleft}
\renewcommand{\right}{\aftergroup\egroup\originalright}

%\newcommand{\myref}[1]{\ref{#1}}
\newcommand{\myref}[1]{\mynameref{#1}{\csname r@#1\endcsname}}
%\newcommand{\myref}[1]{\hyperref[#1]{\nameref{#1} \eqref{#1}}}

\makeatletter
\def\mynameref#1#2{%
	\begingroup
		\edef\@mytxt{#2}%
		\edef\@mytst{\expandafter\@thirdoffive\@mytxt}%
		\ifx\@mytst\empty
			\ref{#1}%
		\else
			\nameref{#1}\space\eqref{#1}\fi%
	\endgroup
}
\makeatother

\makeatletter
\newcommand{\labelname}[1]{
	\def\@currentlabelname{#1}}
\makeatother

\begin{document}
	\portada
%	\gracies
	\tauladecontinguts
%	\book{Primer curs}
	\subfile{parts/FNM.tex}
	\subfile{parts/AlgebraLineal.tex}
	\subfile{parts/Intro.tex}
%	\book{Segon curs}
	\subfile{parts/CDVO.tex}
	\subfile{parts/AM.tex}
	\subfile{parts/EA.tex}
	\subfile{parts/MN.tex}
%	\book{Tercer curs}
	\subfile{parts/Topologia.tex}
	\subfile{parts/EDOS1.tex}
	\subfile{parts/GeoDiferencial.tex}
	\subfile{parts/EDOS2.tex}
\end{document} %WEB TO' MOLONA: http://www-history.mcs.st-and.ac.uk/BiogIndex.html

% Definir commanda per [x] i canviar-les totes. Potser amb paràmetres (per barra, claudators i superíndexos) Potser dues commandes per overline i claudators

% \Rightarrow \implica; \Leftarrow \implicatper; \Leftrightarrow \sii

%\[\mathbb{A}\mathbb{B}\mathbb{C}\mathbb{D}\mathbb{E}\mathbb{F}\mathbb{G}\mathbb{H}\mathbb{I}\mathbb{J}\mathbb{K}\mathbb{L}\mathbb{M}\mathbb{N}\mathbb{O}\mathbb{P}\mathbb{Q}\mathbb{R}\mathbb{S}\mathbb{T}\mathbb{U}\mathbb{V}\mathbb{W}\mathbb{X}\mathbb{Y}\mathbb{Z}\]

% http://www.math.uconn.edu/~kconrad/blurbs/